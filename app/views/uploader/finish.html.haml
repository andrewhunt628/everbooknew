.page.edit-album

  %a.back < Go back and chose more

  .action-button
    %a#finish{href: '#'} Upload photos


  #pins.transitions-enabled
    = form_tag('/uploader/save', class: 'pin-form ') do
      .box.wrapper.controls
        .panel.panel-default
          .panel-content
            .panel-body
              .wrapper
                -#= form_tag('/uploader/save', method: 'post', class: 'form-horizontal album-form') do

                .form-group.header
                  %h3 Editing <span class="pins-count">#{@pins.count.to_s + ' photo' + (@pins.count > 1 ? 's' : '')}</span>:

                .form-group
                  %label.control-label{for: 'title'} Add title
                  %input.form-control#global-title{type: 'text', name: 'title', placeholder: 'Title'}

                .form-group
                  %label.control-label{for: 'description'} Add description
                  %textarea.form-control#global-description{placeholder: 'Description'}

                .form-group
                  %label.control-label Edit hashtags
                  %div
                    %span.hash-tag #summer2015 ×
                    %span.hash-tag #funny ×
                    %span.hash-tag #rob and bob rules ×
                    %input.form-control{type: 'text', name: 'hashtag', placeholder: 'Add new #hashtag'}

                .form-group
                  %label.control-label{for: 'album_id'} Add to album
                  = select('album', 'id', @albums.collect {|album| [album.title, album.id]}, {}, {class: 'form-control'})

                .form-group
                  %a#new-album{href: '#'} Create new
      - @pins.each do |pin|
        .box.panel.panel-default.pin.panel-pin
          %img.remove-button{src: '/images/remove_button.svg', 'data-id' => pin.id}
          .panel-content
            .photo-wrap
              = image_tag pin.image.url(:medium), class: "image", 'data-toggle'=>"modal", 'data-target'=>"#pinModal"
            .panel-footer
              .form-group.has-feedback
                %span.glyphicon.glyphicon-pencil.form-control-feedback(aria-hidden="true")
                %input.form-control.title{placeholder: 'title', name: "pins[#{pin.id}][title]"}
              .form-group.has-feedback
                %span.glyphicon.glyphicon-pencil.form-control-feedback(aria-hidden="true")
                %input.form-control.description{placeholder: 'description', name: "pins[#{pin.id}][description]"}
              .form-group.tags-group
                %span.pin-hash-tag summer2015 ×
                %span.pin-hash-tag funny ×

  %a.back-to-top /\ Back to top

:coffee
  window.files = #{@pins.collect(&:id)}
  new App.UploaderFinish el: $('.page')
